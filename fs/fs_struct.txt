STATE before_parse
    CREATE sel_ref_struct None
    CREATE struct None
    CREATE ptr None
    CREATE sel_ref_struct_used 0
END_STATE

STATE type_specifier
    IF p[0]['exp'][0] EQUALTO "struct"
         GLOBAL_SET struct p[0]['name']
        END_IF
    END_IF
END_STATE

STATE struct_declaration_list
    IF struct IN p[0]['exp']
        CREATE ind p[0]['exp'].index(struct)
        IF p[0]['exp'][ind+1] EQUALTO '*'
            GLOBAL_SET ptr p[0]['exp'][ind+2]
            GLOBAL_SET sel_ref_struct struct
            GLOBAL_SET sel_ref_struct_used 1

    END_IF
END_STATE



STATE after_parse
    IF sel_ref_struct_used EQUALTO 1
        VIOLATION self referential structure used
    ELSE 
        VIOLATION Linked self referential structure not used
    END_IF
END_STATE
